webpackJsonp([1],{"0KUm":function(t,e){},"1/oy":function(t,e,a){var n=a("tJJw");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("MTIv")(n,o);n.locals&&(t.exports=n.locals)},"9M+g":function(t,e,a){var n=a("G7o+");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("MTIv")(n,o);n.locals&&(t.exports=n.locals)},Dcu2:function(t,e){},"G7o+":function(t,e){},GfHa:function(t,e,a){var n=a("Vnho");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("MTIv")(n,o);n.locals&&(t.exports=n.locals)},Id91:function(t,e,a){var n=a("nivm");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("MTIv")(n,o);n.locals&&(t.exports=n.locals)},Jmt5:function(t,e,a){var n=a("NTR8");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("MTIv")(n,o);n.locals&&(t.exports=n.locals)},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},o,!1,function(t){a("r9hL")},null,null).exports,s=a("/ocq"),i=a("mvHQ"),l=a.n(i),c={name:"SoundListView",data:function(){return{startDisabled:!0,crawlUrl:"",errMsg:"",sounds:[],sound_fields:[{key:"id",sortable:!0},{key:"title",sortable:!1}],currentTablePage:1,perTablePage:8}},created:function(){this.reloadSoundList()},computed:{isValidPttUrl:function(){return/^https:\/\/www\.ptt\.cc\/bbs\/[0-9A-Za-z_\-]{1,12}\/M\.\d{10}\.A\.[A-Z0-9]{3}\.html$/.test(this.crawlUrl)}},methods:{api:function(t,e,a){var n={};return e?"POST"==e?n={method:"POST",body:l()(a),headers:{Accept:"application/json","Content-Type":"application/json"}}:console.log("API does not allow this request method."):n={method:"GET",body:null,headers:{"content-type":"application/json"}},fetch(t,n).then(function(t){return t.json()}).catch(function(t){return console.log(t)})},reloadSoundList:function(){this.getSounds()},getSounds:function(){var t=this;this.api("https://pttsounds.com/api/tasks/").then(function(e){t.sounds=e})},newSound:function(){var t=this;this.api("https://pttsounds.com/api/schedule_task/","POST",{crawl_url:this.crawlUrl}).then(function(e){e.id?t.$router.push({name:"SoundMonitor",params:{ctid:e.id}}):alert(e.detail)})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100"},[a("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"pttblue"}},[a("b-row",{staticClass:"mx-2 w-100",attrs:{"no-gutters":""}},[a("b-col",{staticClass:"text-center text-md-start",attrs:{order:"1",cols:"4",offset:"2",md:"4","order-md":"0","offset-md":"0"}},[a("b-navbar-nav",[a("b-navbar-brand",{attrs:{tag:"h1",to:{name:"SoundList"}}},[t._v("Sounds of PTT")])],1)],1),t._v(" "),a("b-col",{attrs:{order:"0",cols:"2","order-md":"1",md:"4","offset-md":"4"}},[a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),a("b-collapse",{staticClass:"justify-content-start justify-content-md-end",attrs:{"is-nav":"",id:"nav_collapse"}},[a("b-navbar-nav",[a("b-nav-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapseInput",expression:"'collapseInput'"}]},[t._v("New")]),t._v(" "),a("b-nav-item",{attrs:{to:{name:"Documentation"}}},[t._v("Documentation")])],1)],1)],1)],1)],1),t._v(" "),a("b-collapse",{attrs:{id:"collapseInput"}},[a("b-card",{staticClass:"text-center mt-2",attrs:{"bg-variant":"dark","text-variant":"white",header:"Create A New Sound"}},[a("b-input-group",{attrs:{prepend:"URL"}},[a("b-form-input",{attrs:{id:"inputLive",type:"text",state:t.isValidPttUrl,"aria-describedby":"inputLiveFeedback",placeholder:"https://www.ptt.cc/bbs/{board}/{article_id}.html"},model:{value:t.crawlUrl,callback:function(e){t.crawlUrl="string"==typeof e?e.trim():e},expression:"crawlUrl"}}),t._v(" "),a("b-input-group-append",[a("b-button",{attrs:{disabled:!t.isValidPttUrl,variant:"primary"},on:{click:t.newSound}},[t._v("\n          Make\n        ")])],1),t._v(" "),a("b-form-invalid-feedback",{attrs:{id:"inputLiveFeedback"}},[t._v("\n          Not a valid PTT Url.\n        ")])],1)],1)],1),t._v(" "),a("b-row",{staticClass:"h-100 mt-2",attrs:{id:"sound-table","align-h":"center","align-v":"start","no-gutters":""}},[a("b-col",{attrs:{cols:"12"}},[a("b-table",{attrs:{items:t.sounds,fields:t.sound_fields,"current-page":t.currentTablePage,"per-page":t.perTablePage,responsive:"sm",striped:"",hover:"",dark:""},scopedSlots:t._u([{key:"id",fn:function(e){return[a("router-link",{attrs:{to:"finished"==e.item.state?{name:"SoundDetail",params:{id:e.value}}:{name:"SoundMonitor",params:{ctid:e.value}}}},[a("a",[t._v(t._s(e.value))])])]}},{key:"title",fn:function(e){return[a("router-link",{attrs:{to:"finished"==e.item.state?{name:"SoundDetail",params:{id:e.item.id}}:{name:"SoundMonitor",params:{ctid:e.item.id}}}},[a("a",[t._v(t._s("finished"==e.item.state?e.value:"--Composing--"))])])]}}])}),t._v(" "),a("b-pagination",{attrs:{size:"md",align:"center","total-rows":t.sounds.length,"per-page":t.perTablePage},model:{value:t.currentTablePage,callback:function(e){t.currentTablePage=e},expression:"currentTablePage"}})],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("vvKW")},null,null).exports,v=a("gBtx"),h=a.n(v),p=a("RRo+"),m=a.n(p),_={props:["ctid"],name:"SoundMonitorView",data:function(){return{ctstatus:"0",ctdetail:"gethering info...",statusInterval:1,pBarPercent:0,pBarPercentMax:100}},created:function(){this.statusInterval=setInterval(this.getCurrentSoundStatus,2e3)},watch:{ctstatus:function(t){m()(h()(t))?this.pBarPercent=h()(t):"ERROR"===t&&(this.pBarPercent=0)}},methods:{api:function(t,e,a){var n={method:e||"GET",body:void 0!==a?l()(a):null,headers:{"content-type":"application/json"}};return fetch(t,n).then(function(t){return t.json()}).catch(function(t){return console.log(t)})},getCurrentSoundStatus:function(){var t=this;this.api("https://pttsounds.com/api/task_progress/"+this.ctid+"/").then(function(e){t.ctstatus=e.status,t.ctdetail=e.detail,"100"!==t.ctstatus&&"ERROR"!==t.ctstatus||clearInterval(t.statusInterval)})}},beforeRouteLeave:function(t,e,a){clearInterval(this.statusInterval),a()}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"pttblue"}},[a("b-row",{staticClass:"mx-2 w-100",attrs:{"no-gutters":""}},[a("b-col",{staticClass:"text-center text-md-start",attrs:{order:"1",cols:"4",offset:"2",md:"4","order-md":"0","offset-md":"0"}},[a("b-navbar-nav",[a("b-navbar-brand",{attrs:{tag:"h1",to:{name:"SoundList"}}},[t._v("Sounds of PTT")])],1)],1),t._v(" "),a("b-col",{attrs:{order:"0",cols:"2","order-md":"1",md:"4","offset-md":"4"}},[a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),a("b-collapse",{staticClass:"justify-content-start justify-content-md-end",attrs:{"is-nav":"",id:"nav_collapse"}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{to:{name:"Documentation"}}},[t._v("Documentation")])],1)],1)],1)],1)],1),t._v(" "),a("b-row",{staticClass:"justify-content-center mx-2 mt-2"},[a("b-col",{attrs:{cols:"12",sm:"10",md:"8"}},[a("b-card",{attrs:{header:"Composing sound "+t.ctid+" ...","bg-variant":"dark","text-variant":"white"}},[a("h3",{attrs:{id:"detail"}},[t._v(t._s(t.ctdetail))]),t._v(" "),a("b-progress",{attrs:{value:t.pBarPercent,max:t.pBarPercentMax,"show-progress":"",animated:""}}),a("br"),t._v(" "),a("b-row",{attrs:{"align-h":"center"}},[a("b-col",{staticClass:"mx-auto text-center",attrs:{cols:"4"}},[a("router-link",{attrs:{to:{name:"SoundList"}}},[a("a",[t._v("Return")])])],1),t._v(" "),a("b-col",{staticClass:"mx-auto text-center",attrs:{cols:"4"}},[a("router-link",{attrs:{to:{name:"SoundDetail",params:{id:t.ctid}}}},[a("a",[t._v("Detail")])])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(_,f,!1,function(t){a("Dcu2")},null,null).exports,g={props:["id"],name:"SoundDetailView",data:function(){return{soundInfo:{}}},created:function(){this.getSoundInfo()},methods:{api:function(t,e,a){var n={method:e||"GET",body:void 0!==a?l()(a):null,headers:{"content-type":"application/json"}};return fetch(t,n).then(function(t){return t.json()}).catch(function(t){return console.log(t)})},getSoundInfo:function(){var t=this;this.api("https://pttsounds.com/api/tasks/"+this.id+"/").then(function(e){t.soundInfo=e})}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"pttblue"}},[a("b-row",{staticClass:"mx-2 w-100",attrs:{"no-gutters":""}},[a("b-col",{staticClass:"text-center text-md-start",attrs:{order:"1",cols:"4",offset:"2",md:"4","order-md":"0","offset-md":"0"}},[a("b-navbar-nav",[a("b-navbar-brand",{attrs:{tag:"h1",to:{name:"SoundList"}}},[t._v("Sounds of PTT")])],1)],1),t._v(" "),a("b-col",{attrs:{order:"0",cols:"2","order-md":"1",md:"4","offset-md":"4"}},[a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),a("b-collapse",{staticClass:"justify-content-start justify-content-md-end",attrs:{"is-nav":"",id:"nav_collapse"}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{to:{name:"Documentation"}}},[t._v("Documentation")])],1)],1)],1)],1)],1),t._v(" "),a("b-row",{staticClass:"justify-content-center mx-2 mt-2"},[a("b-col",{attrs:{cols:"12",sm:"10",md:"8"}},[t.soundInfo.id?a("b-card",{attrs:{title:"finished"==t.soundInfo.state?"["+t.soundInfo.genre+"] "+t.soundInfo.title:"Composing...","sub-title":t.soundInfo.author,"bg-variant":"dark","text-variant":"white"}},[a("p",{staticClass:"card-text"},[t._v(t._s(t.soundInfo.created_dt))]),t._v(" "),a("p",{staticClass:"card-text"},[t._v(t._s(t.soundInfo.state))]),t._v(" "),a("p",["finished"==t.soundInfo.state?a("audio",{attrs:{src:t.soundInfo.wave_file_url,controls:"controls"}},[t._v("\n            Your browser does not support the html5 audio element.\n          ")]):t._e()]),t._v(" "),a("a",{staticClass:"card-link",attrs:{href:t.soundInfo.crawl_url}},[t._v("Sheet")]),t._v(" "),a("router-link",{staticClass:"card-link",attrs:{to:{name:"SoundList"}}},[a("a",[t._v("Return")])])],1):a("b-card",{attrs:{title:"","bg-variant":"dark","text-variant":"white"}})],1)],1)],1)},staticRenderFns:[]};var k=a("VU/8")(g,w,!1,function(t){a("0KUm")},null,null).exports,y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100"},[a("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"pttblue"}},[a("b-row",{staticClass:"mx-2 w-100",attrs:{"no-gutters":""}},[a("b-col",{staticClass:"text-center text-md-start",attrs:{order:"1",cols:"4",offset:"2",md:"4","order-md":"0","offset-md":"0"}},[a("b-navbar-nav",[a("b-navbar-brand",{attrs:{tag:"h1",to:{name:"SoundList"}}},[t._v("Sounds of PTT")])],1)],1),t._v(" "),a("b-col",{attrs:{order:"0",cols:"2","order-md":"1",md:"4","offset-md":"4"}},[a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),a("b-collapse",{staticClass:"justify-content-start justify-content-md-end",attrs:{"is-nav":"",id:"nav_collapse"}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{to:{name:"Documentation"}}},[t._v("Documentation")])],1)],1)],1)],1)],1),t._v(" "),a("b-row",{staticClass:"justify-content-center mt-4 mx-2 mb-4"},[a("b-col",{attrs:{cols:"12",sm:"10",md:"8"}},[a("h1",{attrs:{id:"pttsounds"}},[t._v("Sounds of PTT")]),t._v(" "),a("p",[t._v("Sounds of PTT is a web application that can turn an article on PTT into audible frequencies.")]),t._v(" "),a("h2",{attrs:{id:"idea"}},[t._v("Idea")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.ptt.cc/bbs/index.html"}},[t._v("PTT")]),t._v(" is the most famous BBS in Taiwan, where one can find the public’s opinion for almost any given topic. With public’s opinion structuralized in a series of short comments and “push/boo” tags, one can read through the discussion thread to catch the public’s sentiment orientations of a topic.")]),t._v(" "),a("p",[t._v("However, reading is not the only way we sense this world. Just like the "),a("a",{attrs:{href:"https://www.nasa.gov/feature/goddard/2018/sounds-of-the-sun"}},[t._v("inspiring project")]),t._v(" by NASA, what if we could actually “hear” public's sentiment orientations? Does it feel different from reading? Can we compose meaningful sounds from public's opinions? Will a positive rated article sounds better than a negative rated article? If the author and commenters of an article start a band, how will their music sound like? This web application is designed to answer these questions.")]),t._v(" "),a("h2",{attrs:{id:"howitworksingeneral"}},[t._v("How It Works in General")]),t._v(" "),a("p",[t._v("A User first enters a ptt article URL in the [Frontend]. When the [Backend API] receives a valid PTT article URL, it dispatches a [Crawler], which crawls and re-structuralizes article contents for the [Sound Maker]. The [Sound Maker] then can process structuralized data with 3 steps, tokenization, quantization (based on word polarity), and finally sonification. After the procedure is done, a media file will be generated and therefore can be referenced via the [Frontend].")]),t._v(" "),a("h2",{attrs:{id:"technologyused"}},[t._v("Technology Used")]),t._v(" "),a("h3",{attrs:{id:"frontend"}},[t._v("Frontend")]),t._v(" "),a("ul",[a("li",[t._v("Vue.js")]),t._v(" "),a("li",[t._v("Vue router")]),t._v(" "),a("li",[t._v("Bootstrap")])]),t._v(" "),a("h3",{attrs:{id:"backend"}},[t._v("Backend")]),t._v(" "),a("h4",{attrs:{id:"hostingenvironment"}},[t._v("Hosting/Environment")]),t._v(" "),a("ul",[a("li",[t._v("Google Cloud Compute Engine")]),t._v(" "),a("li",[t._v("Docker-Compose")])]),t._v(" "),a("h4",{attrs:{id:"webserver"}},[t._v("Web Server")]),t._v(" "),a("ul",[a("li",[t._v("Nginx")])]),t._v(" "),a("h4",{attrs:{id:"api"}},[t._v("API")]),t._v(" "),a("ul",[a("li",[t._v("Django")]),t._v(" "),a("li",[t._v("Django rest framework")]),t._v(" "),a("li",[t._v("Celery")])]),t._v(" "),a("h4",{attrs:{id:"crawler"}},[t._v("Crawler")]),t._v(" "),a("ul",[a("li",[t._v("Scrapy/Scrapinghub")])]),t._v(" "),a("h4",{attrs:{id:"soundmaker"}},[t._v("Sound Maker")]),t._v(" "),a("h5",{attrs:{id:"tokenization"}},[t._v("Tokenization")]),t._v(" "),a("ul",[a("li",[t._v("pandas")]),t._v(" "),a("li",[t._v("jseg/jieba")])]),t._v(" "),a("h5",{attrs:{id:"quantization"}},[t._v("Quantization")]),t._v(" "),a("ul",[a("li",[t._v("numpy")]),t._v(" "),a("li",[t._v("ANTUSD")])]),t._v(" "),a("h5",{attrs:{id:"sonification"}},[t._v("Sonification")]),t._v(" "),a("ul",[a("li",[t._v("thinkdsp (with some customized code)")])]),t._v(" "),a("h4",{attrs:{id:"database"}},[t._v("Database")]),t._v(" "),a("ul",[a("li",[t._v("Postgresql")])]),t._v(" "),a("h4",{attrs:{id:"messagingcachebackend"}},[t._v("Messaging/Cache Backend")]),t._v(" "),a("ul",[a("li",[t._v("Redis")])]),t._v(" "),a("h2",{attrs:{id:"todos"}},[t._v("TODOs")]),t._v(" "),a("h3",{attrs:{id:"highpriority"}},[t._v("High Priority")]),t._v(" "),a("ul",[a("li",[t._v("[General] Finish the documentation")]),t._v(" "),a("li",[t._v("[General] Push backend codes to GitHub")]),t._v(" "),a("li",[t._v("[Frontend] Redesign component hierarchy")]),t._v(" "),a("li",[t._v("[Backend-API] Reduce restart loading time")]),t._v(" "),a("li",[t._v("[Backend-API] Deal with warning messages")])]),t._v(" "),a("h3",{attrs:{id:"mediumpriority"}},[t._v("Medium Priority")]),t._v(" "),a("ul",[a("li",[t._v("[Backend-DB] Migrate from container to Cloud SQL instance")]),t._v(" "),a("li",[t._v("[Backend-API] Serve backend static and media files with Cloud Storage buckets")])]),t._v(" "),a("h3",{attrs:{id:"lowpriority"}},[t._v("Low Priority")]),t._v(" "),a("ul",[a("li",[t._v("[Backend-Hosting] Migrate from Nginx to Google's load balancer service")])]),t._v(" "),a("h3",{attrs:{id:"mightbeagoodideatodo"}},[t._v("Might Be A Good Idea To Do")]),t._v(" "),a("ul",[a("li",[t._v("[Frontend] An interface that controls ADSR via the ADSR API to change the timbre of sounds")]),t._v(" "),a("li",[t._v("[Frontend] Timbre customization interfaces")]),t._v(" "),a("li",[t._v("[Frontend] Real-time Audio-visual feature with p5.js or d3.js")])]),t._v(" "),a("h2",{attrs:{id:"credits"}},[t._v("Credits")]),t._v(" "),a("h3",{attrs:{id:"insp-ackn"}},[t._v("Inspiration and Acknowledgements")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.nasa.gov/feature/goddard/2018/sounds-of-the-sun"}},[t._v("Sounds of the Sun")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.mis.nsysu.edu.tw/~bkuo/"}},[t._v("Prof. Feng-Yang Kuo")])]),t._v(" "),a("li",[a("a",{attrs:{href:"http://www.changyentzu.com/"}},[t._v("Yen-tzu Chang")])])]),t._v(" "),a("h3",{attrs:{id:"resources"}},[t._v("Resources")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/AllenDowney/ThinkDSP"}},[t._v("Allen B. Downey")]),t._v(": The author of Think DSP, an awesome book for learning digital signal processing.")]),t._v(" "),a("li",[a("a",{attrs:{href:"http://academiasinicanlplab.github.io/"}},[t._v("NLPSA")]),t._v(": Where I acquire ANTUSD for this project.")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/amigcamel/Jseg"}},[t._v("Jseg")]),t._v(": A better choice for tokenization in this project.")])]),t._v(" "),a("h3",{attrs:{id:"references"}},[t._v("References")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://medium.com/@matthew.rosendin/dockerizing-a-full-stack-application-89a7d69e11e9"}},[t._v("Dockerizing a Full-stack Application")])]),t._v(" "),a("li",[a("a",{attrs:{href:"http://seanlook.com/2015/05/17/nginx-location-rewrite/"}},[t._v("nginx配置location总结及rewrite规则写法")])]),t._v(" "),a("li",[a("a",{attrs:{href:"http://synthesizeracademy.com/voltage-controlled-oscillator-vco/"}},[t._v("Voltage-Controlled Oscillator (VCO)")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://boostlog.io/@nixus89896/setup-caching-in-django-with-redis-5abb7d060814730093a2eebe"}},[t._v("Setup caching in Django With Redis")])]),t._v(" "),a("li",[a("a",{attrs:{href:"http://blog.acipo.com/wave-generation-in-python/"}},[t._v("Wave Generation in Python")])])])])],1)],1)},staticRenderFns:[]};var S=a("VU/8")({name:"DocumentationView"},y,!1,function(t){a("VEoz")},null,null).exports;n.a.use(s.a);var T=new s.a({routes:[{path:"/",redirect:{name:"SoundList"}},{path:"/sounds/",name:"SoundList",component:u},{path:"/sounds/:id/",name:"SoundDetail",component:k,props:!0},{path:"/new_sound/:ctid/",name:"SoundMonitor",component:b,props:!0},{path:"/documentation/",name:"Documentation",component:S,props:!0}]}),x=a("e6fC");a("Jmt5"),a("9M+g");n.a.use(x.a),n.a.config.productionTip=!1,new n.a({el:"#app",router:T,components:{App:r},template:"<App/>"})},NTR8:function(t,e){},VEoz:function(t,e){},Vnho:function(t,e){},fMnH:function(t,e){},nivm:function(t,e){},r9hL:function(t,e){},tJJw:function(t,e){},vvKW:function(t,e){},zj2Q:function(t,e,a){var n=a("fMnH");"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("MTIv")(n,o);n.locals&&(t.exports=n.locals)}},["NHnr"]);
//# sourceMappingURL=app.6217abe2bf3e46ebfb6c.js.map